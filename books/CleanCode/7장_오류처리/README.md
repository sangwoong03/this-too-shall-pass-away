# 7장. 오류 처리

> 무언가 잘못될 가능성은 늘 존재한다. 잘못된 부분을 바로 잡을 책임은 개발자에게 있다.

웹서비스, 웹 애플리케이션을 개발자는 개발자에게 있어 오류와 예외는 심각한 문제를 가져올 수 있습니다.  
그전에 오류와 예외는 어떤 차이가 있는지 간단히 알아보자면,,,

> ### 오류 (Error)
>
> 오류는 프로그램에서 회복하기 어려운 심각한 문제를 의미합니다. 프로그램의 정상적인 실행을 방해하고 대부분 시스템 수준에서 발생합니다. 예를 들면, 메모리 부족, 스택 오버플로우 등이 있습니다.

> ### 예외 (Exception)
>
> 예외는 프로그램의 정상적인 흐름을 방해하는 조건을 나타냅니다. 예외는 대부분 예상 가능하고 처리할 수 있습니다. 예를 들면, 파일을 열려고 할 때 해당 파일이 존재하지 않는 경우, 또는 네트워크 연결 중에 문제가 발생한 경우 등이 있습니다.

오류는 예측이 불가능한 시스템 수준의 심각한 문제로 프로그램의 중단을 초래하하지만,
예외는 충분히 예측 가능하기 때문에 개발자는 예외에 대해 핸들링 할 수 있어야 할 것입니다.

## 예외처리 방법

`Clean Code`에서는 오류를 다루는 방식 조차 깨끗한 코드를 구성하는 하나의 조각으로 보고 있습니다. 예외를 정의하고 오류를 다루는 논리 로직이 실제 서비스를 이루는 로직과 분리되어야 한다는 관점에서 유지보수가 더 뛰어날 것이라는 관점으로 설명하고 있습니다.

아래는 `Clean Code`에서 오류를 다루는 방법들입니다:

### ✔️ 오류보다 예외를 사용하자.

책에서는 예외를 사용하는 것이 오류 코드에 비해 코드의 가독성과 유지 보수성을 향상시키는 데 더 좋다고 강조됩니다. 여기서 중요한 개념과 원칙은 다음과 같습니다:

1. 오류 코드 대신 예외 사용:  
   오류를 나타내기 위해 반환 코드나 특정 값(예를 들어, -1이나 null)을 사용하는 것보다 예외를 활용하여 오류를 처리하는 것이 좋습니다. 이렇게 하면 코드의 가독성이 향상되고 오류 처리 로직이 분리됩니다.

2. 특정 예외 클래스 사용:  
   적절한 예외 클래스를 사용하여 예외의 종류를 명확하게 나타냅니다. 예를 들어, FileNotFoundException, IllegalArgumentException 등의 표준 예외 클래스를 활용하여 코드의 가독성을 높입니다.

3. 예외 처리는 예외 발생 지점에서:  
   예외를 처리할 때 예외가 발생한 지점에서 처리해야 합니다. 중앙 집중식 예외 처리나 오류 코드를 반환하는 것보다, 예외를 발생시킨 메서드에서 예외를 처리하도록 합니다.

4. 예외 체인:  
   예외가 발생하고 예외를 처리하는 곳에서 중요한 정보를 예외에 첨부하여 예외 체인을 생성합니다. 이렇게 하면 디버깅 및 로깅에 유용합니다.

5. 복구할 수 있는 예외와 복구할 수 없는 예외 구분:  
   복구할 수 있는 예외를 활용하여 오류를 처리하고 복구할 수 없는 예외는 상위 수준에서 처리합니다.

### ✔️ try-catch 구문부터 작성하자.

놓치기 쉬운 부분이지만, 코드를 작성할 때 `try { } catch { }` 블록부터 작성하는 것을 좋은 습관으로 보는 것 같습니다. 우리가 작성하는 코드에서 뿐만 아니라, 외부 라이브러리를 사용하는 경우 예외 처리에 대한 구조를 더 빨리 파악하고 작성할 수 있기 때문인 것 같습니다.

### ✔️ 미확인 예외를 사용하자.

미확인 예외(unchecked exception)를 사용하라는 것은 컴파일러가 강제하지 않는 예외를 사용할 때도 주의하라는 의미입니다. 미확인 예외는 주로 런타임 예외와 관련이 있으며, 이러한 예외를 남용하지 말고 명확한 상황에서만 사용해야 합니다.

### ✔️ 예외에 의미를 제공하자.

예외를 정의할 때 예외의 의미를 분명하게 나타내도록 하라는 것입니다. 예외 이름과 설명은 코드를 읽는 사람에게 예외의 발생 원인과 처리 방법을 이해시키는 데 도움이 됩니다.

### ✔️ 호출자를 고려해 예외를 정의하자.

예외를 정의할 때 해당 예외를 호출하는 코드 블록(호출자)에서 어떻게 처리해야 하는지 고려하라는 것을 의미합니다. 이렇게 하면 예외 처리가 더 일관되고 효과적으로 이루어질 수 있습니다.

### ✔️ 정상 흐름을 정의하자.

예외 처리 코드를 작성할 때에도 정상 흐름을 고려하라는 것입니다. 예외 처리 코드만 작성하고 정상적인 실행 경로를 고려하지 않으면 코드가 복잡해지고 버그가 발생할 가능성이 높아집니다.

### ✔️ null은 반환하지도 전달하지도 말자.

null을 반환하거나 전달하는 대신, 예외를 던지거나 기본값을 반환하는 방식을 사용하라는 것입니다. null은 코드에서 예기치 않은 동작을 유발할 수 있는 원인 중 하나이며, null 체크로 인한 복잡성을 피하기 위한 것입니다.

### ⭐️ 개인적인 의견

> 요즘 프레임워크에서 사용되는 예외처리를 잘 활용하자.  
> 뒷단에서 예외처리를 할 수 있는 예외에 대해서는 확실하게 처리하자.  
> 예측 불가능한 오류를 확실히 분류하기 위해 꼼꼼한 예외처리가 필요할 것 같다.
