# 12장. 창발성

> 창발성, 영어로는 emergence이며 그 뜻은 다음과 같습니다:
> 하위 계층에는 없는 특성이나 행동이 상위 계층에서 자발적으로 돌연히 출연하는 현상.

작은 요소 (클래스, 함수)들의 상호 작용을 통해 상위 계층 (아키텍쳐, 애플리케이션)에 영향을 미치는 것으로 이해를 하고 정리해보겠습니다.

<br>
<br>

## 창발적 설계

`Clean Code`에서는 아래 네가지 규칙을 따르면 코드 구조와 아키텍처 파악이 용이해지고 소프트웨어의 품질을 높일 수 있다고 합니다:

- 모든 테스트 실행하기.
- 중복 제거하기.
- 프로그래머의 의도 표현하기.
- 클래스와 메서드 수를 최소로 줄이기.

<br>


## 1. 모든 테스트를 실행

개발자는 의도한 대로 돌아가는 소프트웨어를 만들어야 합니다. 문서나 설계 상으로는 완벽하고 탄탄한 소프트웨어처럼 보일지 몰라도 시스템을 검증하는 단계가 없다면 문서나 설계에 대한 가치는 인정받기 힘들 수 있습니다.

이런 가치를 인정받기 위해서 `Clean Code`에서는 테스트가 가능한 시스템을 만들 것을 권장합니다. 테스트가 불가능한 시스템은 검증이 불가능하고 검증이 불가능한 시스템은 절대로 출시되어선 안된다고까지 말하는 것을 보면 테스트에 대한 굉장한 신뢰가 있는 것 같습니다.

> 사실 이직 후 사내의 테스트 코드가 없어서 리팩토링이나 디버깅을 할 때 로컬 서버를 직접 실행해야 한다는 불편함이 있었습니다. 어느 정도 공감..

가능한 모든 케이스를 테스트하기 위해서는 결합도가 느슨한 애플리케이션을 설계하고 개발해야 합니다. 그렇기 때문에 DIP나 SRP와 같이 객체 지향 프로그래밍 방법론을 따르게 됩니다.

<br>

## 2. 중복제거

> TDD 방법론을 기반으로 애플리케이션을 개발한다면, 리팩토링을 하면서 시스템이 깨질 걱정을 하지 않아도 된다.
> 리팩토링에 대한 관점으로 중복제거, 의도표현, 클래스 수 줄이기 등을 제시합니다.

우선 프로그래밍에서 중복은 추가 작업, 추가 위험, 불필요한 복잡도를 뜻하기 때문에 피해야 하는 적이라고 언급합니다.

중복은 다양한 형태로 나타날 수 있지만 아마 대다수 애플리케이션은 비슷한 코드가 중복되는 상황이 많을 것입니다.
메서드를 추상화하고 소규모 재사용성을 높이면서 중복을 제거할 수 있습니다.

### ✔️ Template Method 패턴

`Template Method`는 고차원 중복을 제거할 때 사용되는 패턴으로, `여러 클래스에서 공통으로 사용하는 메서드를 템플릿화하여 상위 클래스에서 정의하고 하위 클래스마다 세부 동작 사항을 다르게 구현하는 패턴`을 말합니다.

- `추상 클래스` : 변하지 않는 기능을 하는 추상 메서드 템플릿을 상위 클래스로 만듭니다.
- `구현 클래스` : 추상 클래스를 상속받아 추상 메서드를 구현합니다. 애플리케이션에서 자주 변경되고 확장이 필요한 기능들을 템플릿의 하위 클래스에 만듭니다.

<br>

## 3. 의도표현

> 내가 코드를 짜는 동안은 내 코드에 몰입해 있기 때문에 이해하기도 쉽다. 하지만 다른 사람이 보면 그만큼의 시간을 들여야한다.
> 개발자는 코드로 소통하는 사람이기 때문에 다른 사람이 다른 의도로 받아들이지 않도록 코드를 개선하는 작업이 필요하다.

개발 프로젝트의 많은 비용은 사실 유지보수에 소모될 수 밖에 없습니다. 코드에서 비롯되는 버그를 줄이기 위해서는 개발자들이 시스템을 제대로 이해해야 합니다.
하지만 시스템은 점점 더 고도화되고 복잡해지면서 유지보수 해야할 코드 자체를 이해하지 못하거나 잘못 이해하는 문제가 발생합니다.

해결방법: 애초부터 코드를 깔끔하게 짜고 리팩토링하면 되잖아?

- 함수나 클래스를 만들 때 의미있는 이름 선택하기.
- 함수와 클래스의 크기는 가능한 줄이기.
- 표준 명칭 사용하기.
- 단위 테스트를 꼼꼼하게 작성하기.

하지만 코드에 의도를 녹여내는 작업은 반드시 `노력`이 필요하다고 합니다.
나중에 코드를 읽을 사람을 배려하는 작업은 사실 잘 안하게 되지만 우리가 간과하면 안되는 사실은... 나중에 코드를 읽을 사람이 바로 나 `자신`이라는 점입니다.

<br>

## 4. 클래스와 메서드 (가능한) 최소화

사실 중복을 줄이는 과정을 거치면 어느정도 클래스와 메서드의 수를 관리할 수 있게 됩니다. 하지만 리팩토링을 한다는 것은 커다란 덩어리를 잘게 쪼개는 것을 의미하기도 하기 때문에 반드시 최소화하는 것이 무조건 좋다고 설명하지는 않습니다.

예를 들어, 클래스의 역할마다 다른 인터페이스를 구현해야 하는 경우가 그것입니다. 그렇기 때문에 `Clean Code`에서는 클래스와 함수의 수를 줄이는 것보다는 중복 제거, 테스트 케이스 작성, 의도 표현 등의 방법을 더 강조하고 있습니다.

<br>

### ✨ 결론

- 누군가 무엇을 쉽게 한다면 그 사람은 전문가이다...
- 내가 쓴 코드르 좀 더 들여다보면 중복을 확실히 줄일 수 있다.
- 코드 쓰기 전에 개발에 대한 명세를 작성하면 테스트 케이스를 만들어두고 개발을 시작할 수 있다.
- 경험이 필요하긴 하겠지만 내가 쓴 코드를 남들에게 보여준다는 생각으로 코드를 쓰자. 어딜 내놓아도 부끄러운 내 코드...